<% if params[:term].nil? || params[:term].empty? %>
  <h2>Please enter a username</h2>
<% end %>

<% if @users.empty? %>
  <h2>No users matching that username</h2>
<% end %>

<%= form_tag(add_users_path, method: :get) do %>
  <%= text_field_tag :term, params[:term] %>
  <%= submit_tag 'Search', name: nil %>
<% end %>

<% if @users.any? %>
  <h2>Users</h2>
  <% @users.each do |u| %>
    <li><%= u.username %>
      <% if current_user?(u) %>

      <% elsif current_user.following?(u)%>
        - <%= link_to "Following", u %>
      <% else %>
        - <%= link_to "Follow", u %>
      <% end %>
    </li>
  <% end %>
<% end %>

<%= will_paginate @users %>